---
title: "Second Blog Post"
subtitle: ""
author: "TEAM 14"
date: "2024-03-25"
draft: false
---

## Data background

### Where does the data come from? Who collected it? Why was it collected? Are you able to find the data from the original source?

This data comes from the NYPD website and is collected by the Office of Management Analysis and Planning of the New York City Police Department. This dataset provides a general overview of the nature of police enforcement activity in NYC by the NYPD to the public starting from 2006. 

Sources: https://data.cityofnewyork.us/w/uip8-fykc/25te-f2tw?cur=r4FZeyikcAn

### Are there any issues you can see with how the data was collected? What is the sample population? Are there reasons to think the sample is biased in some way?

The collection of NYPD Arrest Data raises several concerns regarding its collection and subsequent analysis. Reporting biases might result from inconsistencies in how incidents are documented across different precincts or by individual officers, affecting data uniformity and reliability. Human error in data entry could introduce inaccuracies, including misclassifications or incorrect demographic information, which could mislead analyses, particularly in trend or demographic studies.

This sample population consists of individuals arrested by the NYPD, as recorded in this dataset for the year to date. It represents only the subset of the population that has been arrested and does not reflect the broader New York City population.

There might be some biases in the sample. In the dataset, certain age groups are disproportionately represented.Over representation of the 25-44 age group and certain racial demographics suggests possible targeted enforcement or societal issues, which could bias data-driven analyses. Additionally, the dataset disproportionately represents certain demographics in terms of race.

### How is this data used? Has there been other research on the same data? Is this data being used for some policy decisions? What questions have others ask about this data?

This data can be used to inform policy decisions related to law enforcement practices, resource allocation, and community support programs. By analyzing patterns and trends in the data, policymakers can identify areas in need of intervention or reform. Moreover, researchers may examine the data to study crime trends, the effectiveness of policing strategies, and the impact of socio-economic factors on crime rates. Comparisons with previous years can reveal changes in crime patterns or the effectiveness of law enforcement policies. However, I didn’t find other research on the same data. Researchers, journalists, and policymakers have explored various questions using NYPD Arrest Data, such as: Are certain demographic groups disproportionately represented in arrest statistics? If so, what might be contributing to these disparities? Are there significant differences in arrest rates across different boroughs or neighborhoods, and what factors contribute to these differences?

## Data Loading and Cleaning

```{r include=F}
library(tidyverse) 
library(ggplot2)
library(dplyr)
library(kableExtra)
library(data.table)
library(magrittr)
library(knitr)
ds <- read_rds("dataset/load_and_clean_data.rds") 
```


[Data Loading and Cleaning Script](scripts/load_and_clean_data.R)

In the cleaning of the crime dataset, we delete the arrest ID, two police classification ID, jurisdiction code, and four coordinate variables . These variables are redundant and not relevant with our research. Then, We remove rows with any NA and null values from the dataset. We also delete undefined data in Level of offense: felony, misdemeanor, violation, infraction, besides that, we deleted the race recorded as unknown.


```{r echo =F}
variables_df <- data.frame(
  Variable = c("ARREST_DATE",  "PD_DESC",  "OFNS_DESC", "LAW_CAT_CD",
               "ARREST_BORO",
              "ARREST_PRECINCT","AGE_GROUP", "PERP_SEX", "PERP_RACE", 
              "temp","windspeed","conditons"),
  Data_Types = c("calendar date", "text", "text", 
                 "text","text",
                 "number","text", "text", "text", 
                 "number","number","text"),
  Description = c( 
                  "Exact date of arrest for the reported event", 
                  "Description of internal classification corresponding with PD code (more granular than Offense Description)", 
                  "Description of internal classification corresponding with KY code (more general category than PD description)", 
                  "Level of offense: felony, misdemeanor, violation, infraction", 
                  "	Borough of arrest. B(Bronx), S(Staten Island), K(Brooklyn), M(Manhattan), Q(Queens)",
                  
                  "Precinct where the arrest occurred", 
                  "Perpetrator’s age within a category", 
                  "Perpetrator’s sex description", 
                  "Perpetrator’s race description", 
                  "Average Daily temperature in Celsius",
                  "Daily Windspeed in Kilometer",
                  "Short description about the weather")
)
kable(variables_df, format = "html")|>
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"),
                full_width = F, 
                font_size = 12) |>
  column_spec(1, bold = T, color = "black") |>
  row_spec(0, background = "#D3D3D3") 
```




```{r echo=F} 
unique_count <- unique(ds$OFNS_DESC)  
length(unique_count) 
```
Through count unique cases based on the "OFNS_DESC, there are 63 different types of arrest cases.



## Explantory Analysis Part 1 
```{r echo=FALSE, message=FALSE, warning= FALSE}
ds|>
ggplot(aes(PERP_RACE)) +
geom_bar(aes(fill = PERP_RACE)) +
theme_minimal() +
labs(x = 'Race', y = 'Number of Cases', title = 'Number of Cases by Race') +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

On this graph we are showing the number of cases per race among all races. On this graph we can see that the lowest number of cases per race are represented by the Indian/Alaskan native people. The highest is for colred people having over 11k cases during this period.


```{r echo=FALSE, message=FALSE, warning= FALSE}
  
# Group by OFNS_DESC and summarize the count
crime_summary <- ds %>%
  group_by(OFNS_DESC) %>%
  summarize(Incident_Count = n()) %>%
  arrange(desc(Incident_Count)) %>%
  top_n(10) 

# Create a bar plot
ggplot(crime_summary, aes(x = reorder(OFNS_DESC, Incident_Count), y = Incident_Count)) +
  geom_bar(stat = "identity", fill = "skyblue") +
  labs(title = "Top 10 Crime Categories by Incident Count",
       x = "Crime Categories",
       y = "Count") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
  
  
```

The bar chart presents a comparison of incident counts across the top 10 crime categories. The most frequently reported category is "Assault & Related Offenses," which leads the chart. "Petit Larceny" appears as the second most prevalent, followed closely by "Dangerous Drugs." The categories at the lower end of the spectrum, "Dangerous Weapons" and "Grand Larceny," have the fewest reported incidents among the top 10. 


```{r echo=FALSE, message=FALSE, warning= FALSE}
# Group by OFNS_DESC and PERP_SEX, and summarize the count
crime_summary <- ds %>%
  group_by(OFNS_DESC) %>%
  summarize(Incident_Count = n()) %>%
  arrange(desc(Incident_Count)) %>%
  top_n(10) 

# Group by OFNS_DESC and PERP_SEX, and summarize the count
crime_gender_summary <- ds %>%
  filter(OFNS_DESC %in% crime_summary$OFNS_DESC) %>%
  group_by(OFNS_DESC, PERP_SEX) %>%
  summarize(Incident_Count = n()) 


# Calculate the total count for each crime category
total_counts <- crime_gender_summary %>%
  group_by(OFNS_DESC) %>%
  summarize(Total_Count = sum(Incident_Count))

# Calculate the proportion for each gender within each category
crime_gender_summary <- crime_gender_summary %>%
  left_join(total_counts, by = "OFNS_DESC") %>%
  mutate(Proportion = Incident_Count / Total_Count)

# Create a bar plot
ggplot(crime_gender_summary, aes(x = reorder(OFNS_DESC, Proportion), y = Proportion, fill = PERP_SEX)) +
  geom_bar(stat = "identity", position = "dodge") +
  labs(title = "Proportion of Top 10 Crime Categories by Gender",
       x = "Crime Categories",
       y = "Proportion",
       fill = "Gender") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```


```{r echo=FALSE, message=FALSE, warning= FALSE}
crime_summary <- ds %>%
  group_by(OFNS_DESC) %>% 
  summarize(Incident_Count = n()) %>%
  arrange(desc(Incident_Count)) %>%
  top_n(10)

# Group by OFNS_DESC and PERP_SEX, and summarize the count
crime_gender_summary <- ds %>%
  filter(OFNS_DESC %in% crime_summary$OFNS_DESC) %>%
  group_by(OFNS_DESC, PERP_SEX) %>%
  summarize(Incident_Count = n()) 

# Create a bar plot
ggplot(crime_gender_summary, aes(x = reorder(OFNS_DESC, Incident_Count), y = Incident_Count, fill = PERP_SEX)) + 
  geom_bar(stat = "identity", position = "dodge") +
  labs(title = "Total Incidents in Top 10 Crime Categories by Gender",
       x = "Crime Categories",
       y = "Incident Count",
       fill = "Gender") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

This graph displays a breakdown of crime incidents by gender across different categories, with green bars representing males, red bars for females, and blue bars for unknown gender. A striking feature of the chart is the predominance of green bars (male incidents), which are consistently the highest in every crime category, indicating a higher number of male-associated incidents in these categories. The most significant numbers of incidents for both males and females are recorded in "PETIT LARCENY" and "ASSAULT 3 & RELATED OFFENSES." Incidents with an unknown gender, represented by blue bars, are the lowest across all categories, suggesting that gender data is more often available than not. The overall trend suggests that while crime affects all genders, males are associated with a higher number of incidents in the data represented.



