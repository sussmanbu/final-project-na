<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="We describe the sources of our data and the cleaning process, and some explantory analysis.">

<title>MA [46]15 Final Project — TEAM 14 - Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">MA [46]15 Final Project — TEAM 14</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./big_picture.html" rel="" target="">
 <span class="menu-text">Big Picture</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./analysis.html" rel="" target="">
 <span class="menu-text">Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./data.html" rel="" target="" aria-current="page">
 <span class="menu-text">Data</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-background" id="toc-data-background" class="nav-link active" data-scroll-target="#data-background">Data background</a>
  <ul class="collapse">
  <li><a href="#where-does-the-data-come-from-who-collected-it-why-was-it-collected-are-you-able-to-find-the-data-from-the-original-source" id="toc-where-does-the-data-come-from-who-collected-it-why-was-it-collected-are-you-able-to-find-the-data-from-the-original-source" class="nav-link" data-scroll-target="#where-does-the-data-come-from-who-collected-it-why-was-it-collected-are-you-able-to-find-the-data-from-the-original-source">Where does the data come from? Who collected it? Why was it collected? Are you able to find the data from the original source?</a></li>
  <li><a href="#are-there-any-issues-you-can-see-with-how-the-data-was-collected-what-is-the-sample-population-are-there-reasons-to-think-the-sample-is-biased-in-some-way" id="toc-are-there-any-issues-you-can-see-with-how-the-data-was-collected-what-is-the-sample-population-are-there-reasons-to-think-the-sample-is-biased-in-some-way" class="nav-link" data-scroll-target="#are-there-any-issues-you-can-see-with-how-the-data-was-collected-what-is-the-sample-population-are-there-reasons-to-think-the-sample-is-biased-in-some-way">Are there any issues you can see with how the data was collected? What is the sample population? Are there reasons to think the sample is biased in some way?</a></li>
  <li><a href="#how-is-this-data-used-has-there-been-other-research-on-the-same-data-is-this-data-being-used-for-some-policy-decisions-what-questions-have-others-ask-about-this-data" id="toc-how-is-this-data-used-has-there-been-other-research-on-the-same-data-is-this-data-being-used-for-some-policy-decisions-what-questions-have-others-ask-about-this-data" class="nav-link" data-scroll-target="#how-is-this-data-used-has-there-been-other-research-on-the-same-data-is-this-data-being-used-for-some-policy-decisions-what-questions-have-others-ask-about-this-data">How is this data used? Has there been other research on the same data? Is this data being used for some policy decisions? What questions have others ask about this data?</a></li>
  </ul></li>
  <li><a href="#data-loading-and-cleaning" id="toc-data-loading-and-cleaning" class="nav-link" data-scroll-target="#data-loading-and-cleaning">Data Loading and Cleaning</a></li>
  <li><a href="#variables-description" id="toc-variables-description" class="nav-link" data-scroll-target="#variables-description">Variables Description</a></li>
  <li><a href="#explantory-analysis" id="toc-explantory-analysis" class="nav-link" data-scroll-target="#explantory-analysis">Explantory Analysis</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data</h1>
</div>

<div>
  <div class="description">
    We describe the sources of our data and the cleaning process, and some explantory analysis.
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><img src="images/data-import-cheatsheet-thumbs.png" class="img-fluid"></p>
<section id="data-background" class="level2">
<h2 class="anchored" data-anchor-id="data-background">Data background</h2>
<section id="where-does-the-data-come-from-who-collected-it-why-was-it-collected-are-you-able-to-find-the-data-from-the-original-source" class="level3">
<h3 class="anchored" data-anchor-id="where-does-the-data-come-from-who-collected-it-why-was-it-collected-are-you-able-to-find-the-data-from-the-original-source">Where does the data come from? Who collected it? Why was it collected? Are you able to find the data from the original source?</h3>
<p>This data comes from the NYPD website and is collected by the Office of Management Analysis and Planning of the New York City Police Department. This dataset provides a general overview of the nature of police enforcement activity in NYC by the NYPD to the public starting from 2006.</p>
<p>Sources: https://data.cityofnewyork.us/w/uip8-fykc/25te-f2tw?cur=r4FZeyikcAn</p>
</section>
<section id="are-there-any-issues-you-can-see-with-how-the-data-was-collected-what-is-the-sample-population-are-there-reasons-to-think-the-sample-is-biased-in-some-way" class="level3">
<h3 class="anchored" data-anchor-id="are-there-any-issues-you-can-see-with-how-the-data-was-collected-what-is-the-sample-population-are-there-reasons-to-think-the-sample-is-biased-in-some-way">Are there any issues you can see with how the data was collected? What is the sample population? Are there reasons to think the sample is biased in some way?</h3>
<p>The collection of NYPD Arrest Data raises several concerns regarding its collection and subsequent analysis. Reporting biases might result from inconsistencies in how incidents are documented across different precincts or by individual officers, affecting data uniformity and reliability. Human error in data entry could introduce inaccuracies, including misclassifications or incorrect demographic information, which could mislead analyses, particularly in trend or demographic studies.</p>
<p>This sample population consists of individuals arrested by the NYPD, as recorded in this dataset for the year to date. It represents only the subset of the population that has been arrested and does not reflect the broader New York City population.</p>
<p>There might be some biases in the sample. In the dataset, certain age groups are disproportionately represented.Over representation of the 25-44 age group and certain racial demographics suggests possible targeted enforcement or societal issues, which could bias data-driven analyses. Additionally, the dataset disproportionately represents certain demographics in terms of race.</p>
</section>
<section id="how-is-this-data-used-has-there-been-other-research-on-the-same-data-is-this-data-being-used-for-some-policy-decisions-what-questions-have-others-ask-about-this-data" class="level3">
<h3 class="anchored" data-anchor-id="how-is-this-data-used-has-there-been-other-research-on-the-same-data-is-this-data-being-used-for-some-policy-decisions-what-questions-have-others-ask-about-this-data">How is this data used? Has there been other research on the same data? Is this data being used for some policy decisions? What questions have others ask about this data?</h3>
<p>This data can be used to inform policy decisions related to law enforcement practices, resource allocation, and community support programs. By analyzing patterns and trends in the data, policymakers can identify areas in need of intervention or reform. Moreover, researchers may examine the data to study crime trends, the effectiveness of policing strategies, and the impact of socio-economic factors on crime rates. Comparisons with previous years can reveal changes in crime patterns or the effectiveness of law enforcement policies. However, I didn’t find other research on the same data. Researchers, journalists, and policymakers have explored various questions using NYPD Arrest Data, such as: Are certain demographic groups disproportionately represented in arrest statistics? If so, what might be contributing to these disparities? Are there significant differences in arrest rates across different boroughs or neighborhoods, and what factors contribute to these differences?</p>
</section>
</section>
<section id="data-loading-and-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="data-loading-and-cleaning">Data Loading and Cleaning</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"dataset/NYPD.csv"</span>,<span class="at">show_col_types =</span> <span class="cn">FALSE</span> )<span class="sc">|&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(<span class="sc">-</span>ARREST_KEY,<span class="sc">-</span>PD_CD,<span class="sc">-</span>KY_CD,<span class="sc">-</span>LAW_CODE,<span class="sc">-</span>ARREST_BORO,<span class="sc">-</span>JURISDICTION_CODE) </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>na_count <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(ds))</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>na_count</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1599</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(ds) </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span> ds <span class="sc">|&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">|&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PD_DESC <span class="sc">!=</span> <span class="st">"(null)"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(ds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 225256     13</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(ds, <span class="st">"dataset/load_and_clean_data.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the data cleaning, we delete the arrest ID, two classification ID, and jurisdiction code. These variables are redundant and not relevant with our research. Remove rows with any NA and null values from the dataset. All in all, it have 225256 rows and 13 columns. Below part shows the modified variables table.</p>
</section>
<section id="variables-description" class="level2">
<h2 class="anchored" data-anchor-id="variables-description">Variables Description</h2>
<div class="cell">
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Data_Types</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ARREST_DATE</td>
<td style="text-align: left;">calendar date</td>
<td style="text-align: left;">Exact date of arrest for the reported event</td>
</tr>
<tr class="even">
<td style="text-align: left;">PD_DESC</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Description of internal classification corresponding with PD code (more granular than Offense Description)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OFNS_DESC</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Description of internal classification corresponding with KY code (more general category than PD description)</td>
</tr>
<tr class="even">
<td style="text-align: left;">LAW_CAT_CD</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Level of offense: felony, misdemeanor, violation</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ARREST_PRECINCT</td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">Precinct where the arrest occurred</td>
</tr>
<tr class="even">
<td style="text-align: left;">AGE_GROUP</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Perpetrator’s age within a category</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PERP_SEX</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Perpetrator’s sex description</td>
</tr>
<tr class="even">
<td style="text-align: left;">PERP_RACE</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Perpetrator’s race description</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X_COORD_CD</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Midblock X-coordinate for New York State Plane Coordinate System</td>
</tr>
<tr class="even">
<td style="text-align: left;">Y_COORD_CD</td>
<td style="text-align: left;">text</td>
<td style="text-align: left;">Midblock Y-coordinate for New York State Plane Coordinate System</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Latitude</td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">Latitude coordinate for Global Coordinate System</td>
</tr>
<tr class="even">
<td style="text-align: left;">Longitude</td>
<td style="text-align: left;">number</td>
<td style="text-align: left;">Longitude coordinate for Global Coordinate System</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Lon_Lat</td>
<td style="text-align: left;">point</td>
<td style="text-align: left;">Georeferenced Point Column based on Longitude and Latitude fields</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>There are 62 crimes, the below table shows the specific description and level in 62 crimes.</p>
<div class="cell">
<div class="cell-output-display">
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; background-color: rgba(211, 211, 211, 255) !important;">OFNS_DESC</th>
<th data-quarto-table-cell-role="th" style="text-align: left; background-color: rgba(211, 211, 211, 255) !important;">PD_DESC_Details</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">ADMINISTRATIVE CODE</td>
<td style="text-align: left;">ADM.CODE,UNCLASSIFIED VIOLATIO, ALCOHOLIC BEVERAGES,PUBLIC CON, ADM.CODE,UNCLASSIFIED MISDEMEA, UNLAWFUL DISCLOSURE OF AN INTIMATE IMAGE, PEDDLING,UNLAWFUL, PARKR&amp;R,UNCLASSIFIED VIOLATION</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">ADMINISTRATIVE CODES</td>
<td style="text-align: left;">NOISE,UNECESSARY</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">AGRICULTURE &amp; MRKTS LAW-UNCLASSIFIED</td>
<td style="text-align: left;">TORTURE/INJURE ANIMAL CRUELTY, ABANDON ANIMAL</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">ALCOHOLIC BEVERAGE CONTROL LAW</td>
<td style="text-align: left;">ALCOHOLIC BEVERAGE CONTROL LAW</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">ANTICIPATORY OFFENSES</td>
<td style="text-align: left;">CONSPIRACY 6, 5, FACILITATION 4, CRIMINAL, SOLICITATION 4, CRIMINAL</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">ARSON</td>
<td style="text-align: left;">ARSON 2,3,4, ARSON 1</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">ASSAULT 3 &amp; RELATED OFFENSES</td>
<td style="text-align: left;">ASSAULT 3, MENACING,UNCLASSIFIED, OBSTR BREATH/CIRCUL</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">BURGLAR'S TOOLS</td>
<td style="text-align: left;">BURGLARS TOOLS,UNCLASSIFIED</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">BURGLARY</td>
<td style="text-align: left;">BURGLARY,UNCLASSIFIED,UNKNOWN, BURGLARY,RESIDENCE,NIGHT</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">CANNABIS RELATED OFFENSES</td>
<td style="text-align: left;">CANNABIS POSSESSION, 2&amp;1, CANNABIS POSSESSION, 3, CANNABIS SALE, 3, CANNABIS SALE, 2&amp;1, CANNABIS SALE, AGGRAVATED, CANNABIS SALE, CANNABIS POSSESSION</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">CHILD ABANDONMENT/NON SUPPORT</td>
<td style="text-align: left;">CHILD ABANDONMENT</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">CRIMINAL MISCHIEF &amp; RELATED OF</td>
<td style="text-align: left;">CRIMINAL MIS 2 &amp; 3, MISCHIEF,CRIMINAL, UNCL 2ND, CRIMINAL MISCHIEF,UNCLASSIFIED 4, CRIMINAL MISCHIEF 4TH, GRAFFIT, FALSE ALARM FIRE, TAMPERING 1,CRIMINAL, TAMPERING 3,2, CRIMINAL, MISCHIEF, CRIMINAL 4, BY FIRE, MISCHIEF 1,CRIMINAL,EXPLOSIVE, RECKLESS ENDANGERMENT OF PROPE, MISCHIEF, CRIMINAL 4, OF MOTOR, MISCHIEF, CRIMINAL 3 &amp; 2, OF M</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">CRIMINAL TRESPASS</td>
<td style="text-align: left;">TRESPASS 2, CRIMINAL, TRESPASS 3, CRIMINAL</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">DANGEROUS DRUGS</td>
<td style="text-align: left;">CONTROLLED SUBSTANCE, POSSESSI, CONTROLLED SUBSTANCE,INTENT TO, SALE SCHOOL GROUNDS, CONTROLLED SUBSTANCE,POSSESS., DRUG PARAPHERNALIA, POSSESSE, CONTROLLED SUBSTANCE, INTENT T, CONTROLLED SUBSTANCE,SALE 3, CONTROLLED SUBSTANCE,SALE 2, CONTROLLED SUBSTANCE,SALE 1, CONTROLLED SUBSTANCE, SALE 5, CONTROLLED SUBSTANCE, SALE 4, SALE SCHOOL GROUNDS 4, POSS METH MANUFACT MATERIAL, SALES OF PRESCRIPTION</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">DANGEROUS WEAPONS</td>
<td style="text-align: left;">CRIMINAL POSSESSION WEAPON, WEAPONS, POSSESSION, ETC, WEAPONS POSSESSION 3, WEAPONS,MFR,TRANSPORT,ETC., CRIMINAL DISPOSAL FIREARM 1, CRIM POS WEAP 4, WEAPONS DISPOSITION OF, UNFINSH FRAME 2, MANUFATURE, TRANSPORT, DEFACE, ETC..., FIREARMS LICENSING LAWS</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">DISORDERLY CONDUCT</td>
<td style="text-align: left;">DISORDERLY CONDUCT</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">DISRUPTION OF A RELIGIOUS SERV</td>
<td style="text-align: left;">DIS. CON.,AGGRAVATED</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">ENDAN WELFARE INCOMP</td>
<td style="text-align: left;">INCOMPETENT PERSON,RECKLESSY ENDANGERING, INCOMPETENT PERSON,KNOWINGLY ENDANGERING</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">ESCAPE 3</td>
<td style="text-align: left;">ESCAPE 3</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">FELONY ASSAULT</td>
<td style="text-align: left;">STRANGULATION 1ST, ASSAULT 2,1,UNCLASSIFIED, ASSAULT POLICE/PEACE OFFICER</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">FELONY SEX CRIMES</td>
<td style="text-align: left;">STALKING COMMIT SEX OFFENSE</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">FORGERY</td>
<td style="text-align: left;">FORGERY,ETC.,UNCLASSIFIED-FELO, FORGERY,M.V. REGISTRATION, FORGERY,PRESCRIPTION</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">FRAUDS</td>
<td style="text-align: left;">IMPERSONATION 2, PUBLIC SERVAN, FRAUD,UNCLASSIFIED-MISDEMEANOR, CHECK,BAD, COMPUTER UNAUTH. USE/TAMPER</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">FRAUDULENT ACCOSTING</td>
<td style="text-align: left;">ACCOSTING,FRAUDULENT</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">GAMBLING</td>
<td style="text-align: left;">GAMBLING, DEVICE, POSSESSION, GAMBLING 2,PROMOTING,UNCLASSIF, GAMBLING 1,PROMOTING,POLICY, GAMBLING 1,PROMOTING,BOOKMAKIN, GAMBLING 2, PROMOTING, POLICY-</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">GRAND LARCENY</td>
<td style="text-align: left;">LARCENY,GRAND FROM OPEN AREAS, UNATTENDED, LARCENY,GRAND FROM PERSON,UNCL, LARCENY,GRAND BY EXTORTION, AGGRAVATED GRAND LARCENY OF ATM, LARCENY,GRAND BY THEFT OF CREDIT CARD, LARCENY,GRAND FROM BUILDING (NON-RESIDENCE) UNATTENDED</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">GRAND LARCENY OF MOTOR VEHICLE</td>
<td style="text-align: left;">LARCENY,GRAND OF AUTO</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">HARRASSMENT 2</td>
<td style="text-align: left;">HARASSMENT,SUBD 3,4,5, HARASSMENT,SUBD 1,CIVILIAN</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">HOMICIDE-NEGLIGENT,UNCLASSIFIE</td>
<td style="text-align: left;">HOMICIDE,NEGLIGENT,UNCLASSIFIE</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">HOMICIDE-NEGLIGENT-VEHICLE</td>
<td style="text-align: left;">HOMICIDE, NEGLIGENT, VEHICLE,</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">INTOXICATED &amp; IMPAIRED DRIVING</td>
<td style="text-align: left;">INTOXICATED DRIVING,ALCOHOL, IMPAIRED DRIVING,DRUG</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">INTOXICATED/IMPAIRED DRIVING</td>
<td style="text-align: left;">INTOXICATED DRIVING,ALCOHOL, IMPAIRED DRIVING, DRUGS</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">JOSTLING</td>
<td style="text-align: left;">JOSTLING</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">KIDNAPPING</td>
<td style="text-align: left;">LURING A CHILD</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">KIDNAPPING &amp; RELATED OFFENSES</td>
<td style="text-align: left;">IMPRISONMENT 1,UNLAWFUL, KIDNAPPING 2, KIDNAPPING 1, CUSTODIAL INTERFERENCE 1</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">MISCELLANEOUS PENAL LAW</td>
<td style="text-align: left;">PUBLIC ADMINISTRATION,UNCLASSI, AGGRAVATED HARASSMENT 1, MENACING 1ST DEGREE (VICT NOT, BRIBERY,PUBLIC ADMINISTRATION, RECKLESS ENDANGERMENT 1, UNAUTHORIZED USE VEHICLE 2, AGGRAVATED CRIMINAL CONTEMPT, TRESPASS 4,CRIMINAL SUB 2, CRIMINAL CONTEMPT 1, THEFT OF SERVICES- CABLE TV SE, FORGERY-ILLEGAL POSSESSION,VEH, FALSE REPORT 1,FIRE, BAIL JUMPING 1 &amp; 2, CONSPIRACY 2, 1, PROMOTING A SEXUAL PERFORMANCE, TRESPASS 1,CRIMINAL, MAKING TERRORISTIC THREAT, BRIBERY,FRAUD, IMPERSONATION 1, POLICE OFFICE, CONSPIRACY 4, 3, ESCAPE 2,1, SOLICITATION 3,2,1, CRIMINAL, VEHICULAR ASSAULT (INTOX DRIVE, COERCION 1, TAMPERING WITH A WITNESS, FACILITATION 3,2,1, CRIMINAL, POSTING ADVERTISEMENTS, PERJURY 2,1,ETC, USURY,CRIMINAL, SUPP. ACT TERR 2ND, RIOT 1, EXPOSURE OF A PERSON, END WELFARE VULNERABLE ELDERLY PERSON, USE OF A CHILD IN A SEXUAL PER, FIREWORKS, POSSESS/USE, ENTERPRISE CORRUPTION, NUISANCE, CRIMINAL</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">MOVING INFRACTIONS</td>
<td style="text-align: left;">UNLICENSED OPERATOR, SEAT BELTS, IMPAIRED DRIVING / ALCOHOL, FAIL TO STOP ON SIGNAL, USE CELL PHONE WHILE DRIVING</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">MURDER &amp; NON-NEGL. MANSLAUGHTE</td>
<td style="text-align: left;">MURDER,UNCLASSIFIED, MANSLAUGHTER,UNCLASSIFIED - NO</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">NYS LAWS-UNCLASSIFIED FELONY</td>
<td style="text-align: left;">NY STATE LAWS,UNCLASSIFIED FEL, CAUSE SPI/KILL ANIMAL</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">OFF. AGNST PUB ORD SENSBLTY &amp;</td>
<td style="text-align: left;">AGGRAVATED HARASSMENT 2, LEWDNESS,PUBLIC, MATERIAL OFFENSIV, NUISANCE,CRIMINAL,UNCLASSIFIED, FALSE REPORT UNCLASSIFIED, RADIO DEVICES,UNLAWFUL POSSESS, FALSE REPORT BOMB, SALE OF UNAUTHORIZED RECORDING, RIOT 2/INCITING, ASSEMBLY,UNLAWFUL</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">OFFENSES AGAINST PUBLIC ADMINI</td>
<td style="text-align: left;">PUBLIC ADMINISTATION,UNCLASS M, BAIL JUMPING 3, RESISTING ARREST, CONTEMPT,CRIMINAL, PERJURY 3,ETC.</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">OFFENSES AGAINST PUBLIC SAFETY</td>
<td style="text-align: left;">PUBLIC SAFETY,UNCLASSIFIED MIS, FIREWORKS, SALE</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">OFFENSES AGAINST THE PERSON</td>
<td style="text-align: left;">RECKLESS ENDANGERMENT 2, IMPRISONMENT 2,UNLAWFUL, CUSTODIAL INTERFERENCE 2, COERCION 2</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">OFFENSES INVOLVING FRAUD</td>
<td style="text-align: left;">FORGERY,ETC.-MISD., BRIBERY,COMMERCIAL, RECORDS,FALSIFY-TAMPER</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">OFFENSES RELATED TO CHILDREN</td>
<td style="text-align: left;">CHILD,OFFENSES AGAINST,UNCLASS</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">OTHER OFFENSES RELATED TO THEF</td>
<td style="text-align: left;">THEFT OF SERVICES, UNCLASSIFIE, THEFT,RELATED OFFENSES,UNCLASS, CREDIT CARD,UNLAWFUL USE OF</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">OTHER STATE LAWS</td>
<td style="text-align: left;">NY STATE LAWS,UNCLASSIFIED VIO, A.B.C.,FALSE PROOF OF AGE</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">OTHER STATE LAWS (NON PENAL LA</td>
<td style="text-align: left;">NY STATE LAWS,UNCLASSIFIED MIS, TAX LAW, PUBLIC HEALTH LAW,UNCLASSIFIED</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">OTHER STATE LAWS (NON PENAL LAW)</td>
<td style="text-align: left;">GENERAL BUSINESS LAW / UNCLASSIFIED</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">OTHER TRAFFIC INFRACTION</td>
<td style="text-align: left;">TRAFFIC,UNCLASSIFIED INFRACTIO, IMPROPER LIGHTS, LEAVING THE SCENE / PROPERTY DAMAGE / INJURED ANIMAL, FAIL TO SIGNAL</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">PARKING OFFENSES</td>
<td style="text-align: left;">UNCLASSIFIED</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">PETIT LARCENY</td>
<td style="text-align: left;">LARCENY,PETIT FROM OPEN AREAS,, LARCENY,PETIT BY ACQUIRING LOS</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">POSSESSION OF STOLEN PROPERTY</td>
<td style="text-align: left;">STOLEN PROPERTY 3,POSSESSION, STOLEN PROPERTY 2,1,POSSESSION, STOLEN PROPERTY-MOTOR VEH 2ND,, STOLEN PROPERTY 2,POSSESSION B</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">PROSTITUTION &amp; RELATED OFFENSES</td>
<td style="text-align: left;">PROSTITUTION, PROSTITUTION 4,PROMOTING&amp;SECUR, PROSTITUTION, PATRONIZING 4, 3, SEX TRAFFICKING, PROSTITUTION,PERMITTING, PROSTITUTION 3,PROMOTING BUSIN, PROSTITUTION 3, PROMOTING UNDE</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">RAPE</td>
<td style="text-align: left;">RAPE 3, RAPE 1, RAPE 2</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">ROBBERY</td>
<td style="text-align: left;">ROBBERY,OPEN AREA UNCLASSIFIED, ROBBERY,CAR JACKING, ROBBERY,GAS STATION</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">SEX CRIMES</td>
<td style="text-align: left;">SEXUAL ABUSE, SEXUAL ABUSE 3,2, SODOMY 1, SEX CRIMES, CHILD, ENDANGERING WELFARE, FORCIBLE TOUCHING, AGGRAVATED SEXUAL ASBUSE, COURSE OF SEXUAL CONDUCT AGAIN, OBSCENITY 1, SEXUAL MISCONDUCT,INTERCOURSE, SEXUAL MISCONDUCT,DEVIATE, INCEST 3, OBSCENE MATERIAL - UNDER 17 YE, SODOMY 3, SODOMY 2, OBSCENITY, PERFORMANCE 3</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">THEFT OF SERVICES</td>
<td style="text-align: left;">UNAUTH. SALE OF TRANS. SERVICE</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">THEFT-FRAUD</td>
<td style="text-align: left;">FRAUD,UNCLASSIFIED-FELONY, COMPUTER TAMPER/TRESSPASS, MONEY LAUNDERING 1 &amp; 2</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">UNAUTHORIZED USE OF A VEHICLE</td>
<td style="text-align: left;">UNAUTHORIZED USE VEHICLE 3</td>
</tr>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: black !important;">UNLAWFUL POSS. WEAP. ON SCHOOL</td>
<td style="text-align: left;">UNLAWFUL POSS. WEAPON UPON SCH</td>
</tr>
<tr class="even">
<td style="text-align: left; font-weight: bold; color: black !important;">VEHICLE AND TRAFFIC LAWS</td>
<td style="text-align: left;">TRAFFIC,UNCLASSIFIED MISDEMEAN, LEAVING SCENE-ACCIDENT-PERSONA, RECKLESS DRIVING</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
</section>
<section id="explantory-analysis" class="level2">
<h2 class="anchored" data-anchor-id="explantory-analysis">Explantory Analysis</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="data_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>On this graph we are showing the number of cases per race among all races. On this graph we can see that the lowest number of cases per race are represented by the Indian/Alaskan native people. The highest is for colred people having over 11k cases during this period.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Selecting by Incident_Count</code></pre>
</div>
<div class="cell-output-display">
<p><img src="data_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The bar chart presents a comparison of incident counts across the top 10 crime categories. The most frequently reported category is “Assault &amp; Related Offenses,” which leads the chart. “Petit Larceny” appears as the second most prevalent, followed closely by “Dangerous Drugs.” The categories at the lower end of the spectrum, “Dangerous Weapons” and “Grand Larceny,” have the fewest reported incidents among the top 10.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Selecting by Incident_Count
`summarise()` has grouped output by 'OFNS_DESC'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="data_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The stacked bar chart visualizes the proportions of the top 10 crime categories distributed by gender, distinguishing between female (F), male (M), and unspecified (U). It’s apparent that male-associated incidents dominate each crime category, with a markedly higher proportion compared to females and unspecified genders across the board. Notably, crimes associated with “Dangerous Drugs,” “Felony Assault,” and “Robbery” show a substantial majority of male involvement. This chart effectively conveys the gender distribution within these crime categories but does not provide the actual number of incidents or contextual background that might explain the observed gender differences.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Selecting by Incident_Count
`summarise()` has grouped output by 'OFNS_DESC'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="data_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This graph displays a breakdown of crime incidents by gender across different categories, with green bars representing males, red bars for females, and blue bars for unknown gender. A striking feature of the chart is the predominance of green bars (male incidents), which are consistently the highest in every crime category, indicating a higher number of male-associated incidents in these categories. The most significant numbers of incidents for both males and females are recorded in “PETIT LARCENY” and “ASSAULT 3 &amp; RELATED OFFENSES.” Incidents with an unknown gender, represented by blue bars, are the lowest across all categories, suggesting that gender data is more often available than not. The overall trend suggests that while crime affects all genders, males are associated with a higher number of incidents in the data represented.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="data_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This bar chart illustrates the racial composition of crime across ten categories, with the green segment indicating a dominant proportion of Black individuals in every category, followed by White Hispanics, represented by the pink segment. The smallest proportions are contributed by Asian/Pacific Islanders and American Indian/Alaskan Natives, shown in orange and red. This visualization provides a proportional breakdown by race, with each color-coded segment corresponding to the percentage of total incidents attributed to that racial group, reflecting the diversity and potential disparities within crime statistics.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>